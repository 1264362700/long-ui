@use '../common/mixins.scss' as *;

@include b(button) {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    line-height: 1;
    height: var(--long-component-size-default);
    white-space: nowrap;
    cursor: pointer;
    background-color: var(--long-fill-color-blank);
    border: 1px solid var(--long-border-color);
    color: var(--long-text-color-regular);
    text-align: center;
    box-sizing: border-box;
    outline: none;
    margin: 0;
    transition: var(--long-transition-all);
    font-weight: var(--long-font-weight-primary);
    user-select: none;
    vertical-align: middle;
    padding: 8px 15px;
    font-size: var(--long-font-size-base);
    border-radius: var(--long-border-radius-base);

    // Apex Style: Subtle Layered Shadow
    box-shadow: var(--long-box-shadow-level-1);
    position: relative;

    // Apex Style: Micro-border simulation
    &::after {
        content: '';
        position: absolute;
        top: -1px;
        left: -1px;
        right: -1px;
        bottom: -1px;
        border-radius: inherit;
        pointer-events: none;
        box-shadow: inset 0 0 0 1px var(--long-border-color-soft);
        opacity: 0.5;
    }

    &:hover,
    &:focus {
        color: var(--long-color-primary);
        border-color: var(--long-color-primary-light-7);
        background-color: var(--long-color-primary-light-9);
        box-shadow: var(--long-box-shadow-level-2);
        transform: translateY(-1px);
    }

    &:active {
        color: var(--long-color-primary-dark-2);
        border-color: var(--long-color-primary-dark-2);
        transform: translateY(0) scale(0.96);
        box-shadow: var(--long-box-shadow-level-1);
    }

    // Element: loading
    @include e(loading) {
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    @include e(loading-icon) {
        width: 1em;
        height: 1em;
        animation: long-loading-rotate 2s linear infinite;
    }

    // Element: icon
    @include e(icon) {
        font-size: 1em;
    }

    // Element: content
    @include e(content) {
        display: inline-flex;
        align-items: center;
    }

    // Modifier: primary
    @include m(primary) {
        color: var(--long-color-white);
        background-color: var(--long-color-primary);
        border-color: var(--long-color-primary);

        &:hover,
        &:focus {
            color: var(--long-color-white);
            background-color: var(--long-color-primary-light-3);
            border-color: var(--long-color-primary-light-3);
        }

        &:active {
            background-color: var(--long-color-primary-dark-2);
            border-color: var(--long-color-primary-dark-2);
        }
    }

    // Modifier: success
    @include m(success) {
        color: var(--long-color-white);
        background-color: var(--long-color-success);
        border-color: var(--long-color-success);

        &:hover,
        &:focus {
            color: var(--long-color-white);
            background-color: var(--long-color-success-light-3);
            border-color: var(--long-color-success-light-3);
        }
    }

    // Modifier: warning
    @include m(warning) {
        color: var(--long-color-white);
        background-color: var(--long-color-warning);
        border-color: var(--long-color-warning);

        &:hover,
        &:focus {
            color: var(--long-color-white);
            background-color: var(--long-color-warning-light-3);
            border-color: var(--long-color-warning-light-3);
        }
    }

    // Modifier: danger
    @include m(danger) {
        color: var(--long-color-white);
        background-color: var(--long-color-danger);
        border-color: var(--long-color-danger);

        &:hover,
        &:focus {
            color: var(--long-color-white);
            background-color: var(--long-color-danger-light-3);
            border-color: var(--long-color-danger-light-3);
        }
    }

    // Modifier: info
    @include m(info) {
        color: var(--long-color-white);
        background-color: var(--long-color-info);
        border-color: var(--long-color-info);

        &:hover,
        &:focus {
            color: var(--long-color-white);
            background-color: var(--long-color-info-light-3);
            border-color: var(--long-color-info-light-3);
        }
    }

    // Modifier: text
    @include m(text) {
        color: var(--long-color-primary);
        background-color: transparent;
        border-color: transparent;
        padding: 0 4px;

        &:hover,
        &:focus {
            background-color: var(--long-color-primary-light-9);
        }

        &:active {
            transform: scale(1);
            /* No scale for text buttons */
            background-color: var(--long-color-primary-light-8);
        }
    }

    // Modifier: size large
    @include m(large) {
        height: var(--long-component-size-large);
        padding: 0 19px;
        font-size: 16px;
    }

    // Modifier: size small
    @include m(small) {
        height: var(--long-component-size-small);
        padding: 0 11px;
        font-size: 12px;
    }

    // State: disabled
    @include when(disabled) {
        cursor: not-allowed !important;
        background-image: none;
        color: var(--long-text-color-disabled);
        background-color: var(--long-fill-color-light);
        border-color: var(--long-border-color-light);

        &:hover,
        &:focus,
        &:active {
            transform: none;
            color: var(--long-text-color-disabled);
            background-color: var(--long-fill-color-light);
            border-color: var(--long-border-color-light);
        }
    }

    // State: loading
    @include when(loading) {
        pointer-events: none;
        opacity: 0.8;
    }

    // State: plain
    @include when(plain) {
        &.long-button--primary {
            color: var(--long-color-primary);
            background-color: var(--long-color-primary-light-9);
            border-color: var(--long-color-primary-light-5);

            &:hover,
            &:focus {
                color: var(--long-color-white);
                background-color: var(--long-color-primary);
                border-color: var(--long-color-primary);
            }
        }

        &.long-button--success {
            color: var(--long-color-success);
            background-color: var(--long-color-success-light-9);
            border-color: var(--long-color-success-light-5);

            &:hover,
            &:focus {
                color: var(--long-color-white);
                background-color: var(--long-color-success);
                border-color: var(--long-color-success);
            }
        }

        &.long-button--warning {
            color: var(--long-color-warning);
            background-color: var(--long-color-warning-light-9);
            border-color: var(--long-color-warning-light-5);

            &:hover,
            &:focus {
                color: var(--long-color-white);
                background-color: var(--long-color-warning);
                border-color: var(--long-color-warning);
            }
        }

        &.long-button--danger {
            color: var(--long-color-danger);
            background-color: var(--long-color-danger-light-9);
            border-color: var(--long-color-danger-light-5);

            &:hover,
            &:focus {
                color: var(--long-color-white);
                background-color: var(--long-color-danger);
                border-color: var(--long-color-danger);
            }
        }

        &.long-button--info {
            color: var(--long-color-info);
            background-color: var(--long-color-info-light-9);
            border-color: var(--long-color-info-light-5);

            &:hover,
            &:focus {
                color: var(--long-color-white);
                background-color: var(--long-color-info);
                border-color: var(--long-color-info);
            }
        }
    }

    // State: round
    @include when(round) {
        border-radius: var(--long-border-radius-round);
    }

    // State: circle
    @include when(circle) {
        width: var(--long-component-size-default);
        padding: 0;
        border-radius: var(--long-border-radius-circle);

        &.long-button--large {
            width: var(--long-component-size-large);
        }

        &.long-button--small {
            width: var(--long-component-size-small);
        }
    }

    // State: block
    @include when(block) {
        display: flex;
        width: 100%;
    }
}

// Loading animation
@keyframes long-loading-rotate {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}